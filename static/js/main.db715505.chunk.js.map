{"version":3,"sources":["components/Header/Header.tsx","utils/pickRandomItem.ts","global/parcoursupAPI.ts","utils/loadFormationData.ts","components/FormationInfos/FormationInfos.tsx","assets/marker.svg","components/MapWrapper/clusterLayer.ts","components/MapWrapper/clusterSource.ts","components/MapWrapper/osmLayer.ts","components/MapWrapper/MapWrapper.tsx","components/GirlBoyProportion/GirlBoyProportion.tsx","components/FunnelCandidates/FunnelCandidates.tsx","components/StatsCard/StatsCard.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Header","className","Math","floor","random","parcoursupAPI","loadFormationData","code_formation","a","requestURL","axios","get","result","data","nhits","records","fields","FormationInfos","useState","school","setSchool","loadData","useEffect","getField","fieldName","count_candidat_boys","count_candidat_girls","count_accepted_boys","count_accepted_girls","title","count_candidates","count_classed","count_proposition_received","count_proposition_accepted","clusterLayer","clusterSource","styleCache","VectorLayer","source","style","feature","size","length","schoolName","getProperties","Style","image","Icon","src","markerIcon","color","anchor","scale","text","Text","offsetY","Circle","radius","stroke","Stroke","fill","Fill","toString","Cluster","distance","minDistance","osmLayer","TileLayer","maxZoom","XYZ","url","MapWrapper","props","map","setMap","setSource","mapElement","useRef","new_source","VectorSource","initialMap","Map","target","current","undefined","layers","view","View","projection","center","zoom","controls","schoolsData","features","filter","entry","coord","feat","Feature","geometry","Point","transform","reverse","setProperties","clear","addFeatures","getView","fit","getExtent","padding","ref","GirlBoyProportion","dataCandidats","key","value","dataAccepted","pourcentageCandidates","toFixed","pourcentageAccepted","description","ResponsiveContainer","width","height","PieChart","Pie","startAngle","endAngle","isAnimationActive","dataKey","nameKey","cx","cy","innerRadius","outerRadius","LabelList","position","Legend","iconSize","layout","verticalAlign","align","FunnelCandidates","createLabel","val","name","label","FunnelChart","Funnel","offset","StatsCard","children","App","setSchoolsData","finished","dataLength","concat","r","console","error","Helmet","content","dataAttribution","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.db715505.chunk.js","sourcesContent":["import logoParcoursup from '../../assets/logoParcoursup.svg'\n\nimport './Header.scss'\n\nconst Header = () => {\n    return (\n        <div className=\"pcs-header\">\n            {/* <img\n                className=\"pcs-header-logo\"\n                src={logoParcoursup}\n                alt=\"Logo Parcoursup\"\n            /> */}\n            <h1 className=\"pcs-header-title\">\n                📊 Statistiques sur la plateforme\n            </h1>\n        </div>\n    )\n}\n\nexport default Header\n","const { floor, random } = Math\n\nexport const pickRandomItem = <T = any>(items: T[]) => {\n    return items[floor(random() * items.length)]\n}\n","export const parcoursupAPI =\n    'https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup'\n","import axios from 'axios'\nimport { parcoursupAPI } from 'global/parcoursupAPI'\n\nexport const loadFormationData = async (code_formation: string) => {\n    try {\n        const requestURL =\n            parcoursupAPI + `&q=cod_aff_form%3D\"${code_formation}\"`\n        const result = await axios.get(requestURL)\n        if (result.data && result.data.nhits === 1) {\n            return result.data.records[0].fields\n        }\n        return {}\n    } catch (e) {\n        return {}\n    }\n}\n","import { FunnelCandidates, GirlBoyProportion } from 'components'\nimport { useEffect, useState } from 'react'\nimport { loadFormationData } from 'utils'\nimport './FormationInfos.scss'\n\nconst FormationInfos = () => {\n    const [school, setSchool] = useState<Record<string, any>>({})\n\n    const loadData = async () => {\n        const result = await loadFormationData('55')\n        // console.log(result)\n        setSchool(result)\n    }\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    const getField = (fieldName: string) => {\n        if (school[fieldName]) return school[fieldName]\n        return 'NaN'\n    }\n    return (\n        <div className=\"pcs-formationinfos-fragment\">\n            <h1 className=\"pcs-formationinfos-title\">\n                Informations sur la formation\n            </h1>\n            <div className=\"pcs-formationinfos-main\">\n                <h1 className=\"pcs-schoolname\">\n                    {getField('fil_lib_voe_acc')}\n                </h1>\n                <p>\n                    <ul className='pcs-stats-ul'>\n                    <li>🏢 {getField('g_ea_lib_vx')} - <i>{getField('contrat_etab')}</i></li>\n                    <li>🗺 {getField('dep_lib')} ({getField('dep')}) -{' '}\n                    {getField('region_etab_aff')}</li>\n                    </ul>\n                </p>\n            </div>\n            <div className=\"pcs-formationinfos-stats\">\n                <p><b>En 2020 :</b>\n                    <ul className='pcs-stats-ul'>\n                        <li>🎓 <b>{getField('capa_fin')}</b> places disponibles</li>\n                        <li>📄 <b>{getField('voe_tot')}</b> voeux enregistrés</li>\n                    </ul>\n                </p>\n            </div>\n\n            <div className='pcs-formationinfo-statscard-wrapper'>\n                <GirlBoyProportion \n                    count_candidat_boys={getField('voe_tot') - getField('voe_tot_f')} \n                    count_candidat_girls={getField('voe_tot_f')} \n                    count_accepted_boys={getField('acc_tot') - getField('acc_tot_f')} \n                    count_accepted_girls={getField('acc_tot_f')} \n                    title={'Proportion de candidates / candidats'} />\n                <FunnelCandidates \n                    count_candidates={getField('nb_voe_pp')}\n                    count_classed={getField('nb_cla_pp')}\n                    count_proposition_received={getField('prop_tot')}\n                    count_proposition_accepted={getField('acc_tot')} \n                    title={'Sélectivité de la formation'} />\n            </div>\n        </div>\n    )\n}\n\nexport default FormationInfos\n","export default __webpack_public_path__ + \"static/media/marker.7a162fbb.svg\";","import VectorLayer from \"ol/layer/Vector\";\nimport Fill from \"ol/style/Fill\";\nimport Circle from \"ol/style/Circle\";\nimport Stroke from \"ol/style/Stroke\";\nimport Text from \"ol/style/Text\";\nimport Icon from \"ol/style/Icon\";\nimport Style from \"ol/style/Style\";\nimport markerIcon from '../../assets/marker.svg'\n\nconst clusterLayer = (clusterSource: any) => \n{\n    const styleCache: Record<string, Style[]> = {};\n    return new VectorLayer({\n    source: clusterSource,\n    style: (feature) => {\n      const size = feature.get('features').length;\n      let style = styleCache[size];\n      if (!style || size === 1) {\n        if (size === 1)\n        {\n            const schoolName = feature.get('features')[0].getProperties()['g_ea_lib_vx']\n            style=  [new Style({\n                image: new Icon({\n                    src: markerIcon,\n                    color: '#e63946',\n                    anchor: [0.5, 1],\n                    scale: 0.5,\n                }),\n                text: new Text({\n                    text: schoolName,\n                    offsetY: 10,\n                })\n            })]\n        }\n        else {\n            style = [new Style({\n                image: new Circle({\n                  radius: 15,\n                  stroke: new Stroke({\n                    color: '#e63946',\n                  }),\n                  fill: new Fill({\n                    color: '#1d3557',\n                  }),\n                }),\n                text: new Text({\n                  text: size.toString(),\n                  fill: new Fill({\n                    color: '#fff',\n                  }),\n                }),\n              })];\n        }\n        styleCache[size] = style;\n      }\n      return style;\n    },\n  });\n}\n\nexport default clusterLayer\n","import Geometry from 'ol/geom/Geometry';\nimport {Cluster, Vector as VectorSource} from 'ol/source';\n\nconst clusterSource = (source: VectorSource<Geometry>) => {\n    return new Cluster({\n        distance: 40,\n        minDistance: 20,\n        source: source,\n    });\n}\n\nexport default clusterSource","import TileLayer from 'ol/layer/Tile'\nimport XYZ from 'ol/source/XYZ'\n\nexport const osmLayer = () => {\n    return new TileLayer({\n    maxZoom: 19,\n    source: new XYZ({\n        url: 'https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n    }),\n    })\n}\n\nexport default osmLayer","import { useState, useRef, useEffect, RefObject } from 'react'\n\nimport './MapWrapper.scss'\n\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport VectorSource from 'ol/source/Vector'\nimport Geometry from 'ol/geom/Geometry'\nimport { Feature } from 'ol'\nimport Point from 'ol/geom/Point'\nimport { transform } from 'ol/proj'\n\nimport clusterLayer from './clusterLayer'\nimport clusterSource from './clusterSource'\nimport osmLayer from './osmLayer'\n\nexport interface MapWrapperProps {\n    schoolsData: Record<string, any>[]\n    dataAttribution: string\n}\n\nconst MapWrapper = (props: MapWrapperProps) => {\n    const [map, setMap] = useState<Map>()\n    const [source, setSource] =\n        useState<VectorSource<Geometry>>()\n\n    const mapElement = useRef() as RefObject<HTMLDivElement>\n\n    useEffect(() => {\n        const new_source = new VectorSource()\n\n        const initialMap = new Map({\n            target: mapElement.current ?? undefined,\n            layers: [\n                osmLayer(),\n                clusterLayer(clusterSource(new_source)),\n            ],\n            view: new View({\n                projection: 'EPSG:3857',\n                center: [0, 0],\n                zoom: 2,\n            }),\n            controls: [],\n        })\n\n        // save map and vector layer references to state\n        setMap(initialMap)\n        setSource(new_source)\n    }, [])\n\n    useEffect(() => {\n        if (!source || props.schoolsData.length === 0) return\n\n        const features = props.schoolsData\n        .filter((entry) => { return entry['g_olocalisation_des_formations'] !== undefined })\n        .map((entry) => {\n            const coord = entry['g_olocalisation_des_formations']\n            const feat = new Feature({\n                geometry: new Point(\n                    transform(coord.reverse(), 'EPSG:4326', 'EPSG:3857')\n                ),\n            })\n            feat.setProperties({ ...entry })\n            return feat\n        })\n\n        if(!features) return\n        source.clear()\n        source.addFeatures(features)\n        if (!map) return\n        map.getView().fit(source.getExtent(), {\n            padding: [100, 100, 100, 100],\n        })\n    }, [props.schoolsData])\n\n    return (\n        <div className=\"pcs-map-fragment\">\n            <h1 className=\"pcs-map-title\">Carte des formations</h1>\n            <div className=\"pcs-map-container\">\n                <div ref={mapElement} className=\"pcs-map\"></div>\n            </div>\n        </div>\n    )\n}\n\nexport default MapWrapper\n","\nimport { StatsCard } from 'components'\nimport { ResponsiveContainer, PieChart, Pie, Legend, Cell, LabelList } from 'recharts'\n\nexport interface GirlBoyProportionProps {\n    count_candidat_boys: number,\n    count_candidat_girls: number,\n    count_accepted_boys: number,\n    count_accepted_girls: number,\n    title: string,\n}\n\nconst GirlBoyProportion = (props: GirlBoyProportionProps) => {\n    const dataCandidats = [\n        { key: \"Nombre de candidates\", value: props.count_candidat_girls, fill: '#e63946'},\n        { key: \"Nombre de candidats\", value: props.count_candidat_boys, fill: '#a8dadc'}\n    ]\n\n    const dataAccepted = [\n        { key: \"Nombre d'acceptées\", value: props.count_accepted_girls, fill: '#6b6fdb'},\n        { key: \"Nombre d'acceptés\", value: props.count_accepted_boys, fill: '#76d169'}\n        ]\n\n    const pourcentageCandidates = (props.count_candidat_girls / ( props.count_candidat_girls + props.count_candidat_boys) * 100).toFixed(0)\n    const pourcentageAccepted = (props.count_accepted_girls / ( props.count_accepted_girls + props.count_accepted_boys) * 100).toFixed(0)\n    const description = `Soit ${pourcentageCandidates}% de candidates et ${pourcentageAccepted}% ayant accepté définitivement la proposition`\n    \n    return (\n        <StatsCard title={props.title} description={description}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <PieChart>\n                    <Pie\n                        data={dataCandidats}\n                        startAngle={0} endAngle={180}\n                        isAnimationActive={false}\n                        dataKey=\"value\" nameKey=\"key\" cx=\"50%\" cy=\"100%\" innerRadius={80} outerRadius={120} >\n                       <LabelList position=\"insideTop\" fill=\"#000\" stroke=\"none\" dataKey=\"value\" />\n                    </Pie>\n\n                    <Pie\n                        data={dataAccepted} \n                        isAnimationActive={false}\n                        startAngle={0} endAngle={180}\n                        dataKey=\"value\" nameKey=\"key\" cx=\"50%\" cy=\"100%\" innerRadius={20} outerRadius={60} >\n                       <LabelList position=\"inside\" fill=\"#000\" stroke=\"none\" dataKey=\"value\" />\n                    </Pie>\n                    <Legend iconSize={10} layout='horizontal' verticalAlign='bottom' align=\"center\" />\n                </PieChart>\n            </ResponsiveContainer>\n    </StatsCard>\n    )\n}\n\nexport default GirlBoyProportion\n","\nimport { StatsCard } from 'components'\nimport { ResponsiveContainer, Funnel, FunnelChart, LabelList, Tooltip, Legend } from 'recharts'\n\nexport interface FunnelCandidatesProps {\n    count_candidates: number,\n    count_classed: number,\n    count_proposition_received: number,\n    count_proposition_accepted: number,\n    title: string,\n}\n\nconst FunnelCandidates = (props: FunnelCandidatesProps) => {\n    const { title, count_classed, count_proposition_accepted, count_proposition_received, count_candidates} = props\n    const createLabel = (val: number, description: string): string => {\n        return `${val} ${description} (${(val / count_candidates * 100).toFixed(0)}%)`\n    }\n\n    const data = [\n        { name: 'Nombre de candidats', value: count_candidates, fill: \"#e63946\", label: createLabel(count_candidates, \"candidat.e.s\") },\n        { name: 'Nombre de candidats classés', value: count_classed, fill: \"#a8dadc\", label: createLabel(count_classed, \"classé.e.s\") },\n        { name: 'Nombre de candidats ayant recu une proposition', value: count_proposition_received, fill: \"#457b9d\", label: createLabel(count_proposition_received, \"reçu.e.s\") },\n        { name: 'Nombre de candidats ayant accepté la proposition', value: count_proposition_accepted, fill: \"#1d3557\", label: createLabel(count_proposition_accepted, \"accepté.e.s\") },  \n    ]\n\n    return (\n        <StatsCard title={title}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <FunnelChart height={250}>\n                    <Funnel\n                        dataKey=\"value\"\n                        data={data}\n                        isAnimationActive={false}\n                    >\n                        <LabelList position=\"insideTopLeft\" offset={10} fill=\"#000\" stroke=\"none\" dataKey=\"label\" />\n                    </Funnel>\n                </FunnelChart>\n            </ResponsiveContainer>\n        </StatsCard>\n    )\n}\n\nexport default FunnelCandidates\n","import './StatsCard.scss'\nexport interface StatsCardProps {\n    children: JSX.Element,\n    title: string,\n    description?: string\n}\n\nconst StatsCard = (props: StatsCardProps) => {\n    const { children, title, description } = props\n\n    return (\n        <div className='pcs-statscard' >\n            <h1 className='pcs-statscard-title'>{title}</h1>\n            <div className='pcs-statscard-content'>\n                {children}\n                {description && <p className='pcs-statscard-description'>{description}</p>}\n            </div>\n        </div>\n    )\n}\n\nexport default StatsCard\n","import { useEffect, useState } from 'react'\n\nimport './App.scss'\n\nimport { Helmet } from 'react-helmet'\n\nimport { FormationInfos, Header, MapWrapper } from './components'\nimport { parcoursupAPI } from './global/parcoursupAPI'\nimport axios from 'axios'\n\nfunction App() {\n    // reloa\n    const [selectedSchool, setSelectedSchool] = useState<string | undefined>()\n    const [schoolsData, setSchoolsData] = useState<Record<string, any>[]>([])\n\n    const loadData = async () => {\n        try {\n            let finished = false\n            let dataLength = 0\n            while (!finished)\n            {\n                const requestURL =\n                parcoursupAPI +\n                `&q=&rows=1000&start=${dataLength}&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations`\n                const result = await axios.get(requestURL)\n                if (result.data) {\n                    dataLength += result.data.records.length\n                    setSchoolsData(\n                        schoolsData.concat(result.data.records.map((r: { fields: any }) => r.fields))\n                    )\n                }\n\n                finished = true\n            }\n        } catch (e) {\n            console.error('error')\n        }\n    }\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    return (\n        <section>\n            <Helmet>\n                <title>Parcoursup - Statistiques</title>\n                <meta\n                    name=\"description\"\n                    content=\"Visualiseur des données publiques de Parcoursup\"\n                />\n            </Helmet>\n            <Header />\n            <section className=\"pcs-main-section\">\n                <MapWrapper schoolsData={schoolsData} dataAttribution={''} />\n                <FormationInfos />\n            </section>\n        </section>\n    )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry)\n                getFID(onPerfEntry)\n                getFCP(onPerfEntry)\n                getLCP(onPerfEntry)\n                getTTFB(onPerfEntry)\n            }\n        )\n    }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}
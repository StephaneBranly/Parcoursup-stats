(this["webpackJsonpparcoursup-stats"]=this["webpackJsonpparcoursup-stats"]||[]).push([[0],{310:function(e,t,a){},312:function(e,t,a){},315:function(e,t,a){},317:function(e,t,a){},478:function(e,t,a){},479:function(e,t,a){},480:function(e,t,a){},481:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(122),i=a.n(s),r=(a(310),a(72)),o=a.n(r),l=a(126),d=a(35),u=(a(312),a(155)),b=(a(315),a(202)),j=a(260),p=a(4),f=function(e){var t=e.currentView,a=e.setView,c=[{label:"Formation",value:"seeFormationInfos",icon:Object(p.jsx)(j.a,{className:"pcs-header-view-button-icon-content"})},{label:"Rechercher",value:"findFormation",icon:Object(p.jsx)(b.b,{className:"pcs-header-view-button-icon-content"})},{label:"Comparer",value:"compareFormations",icon:Object(p.jsx)(b.a,{className:"pcs-header-view-button-icon-content"})}];return Object(p.jsxs)("div",{className:"pcs-header",children:[Object(p.jsx)("div",{className:"pcs-header-head",children:Object(p.jsx)("h1",{className:"pcs-header-title",children:"\ud83d\udcca Statistiques sur Parcoursup"})}),Object(p.jsx)("div",{className:"pcs-header-menu",children:c.map((function(e){return Object(p.jsxs)("div",{onClick:function(){return a(e.value)},className:"pcs-header-view-button ".concat(t===e.value?"active":""),children:[Object(p.jsx)("div",{className:"pcs-header-view-button-icon",children:e.icon}),Object(p.jsx)("div",{className:"pcs-header-view-button-name",children:e.label})]})}))})]})},h=a(286),m=(a(317),a(280)),x=a(81),_=a(169),v=a(261),O=a(107),g=a(16),N=a(281),w=a(86),y=a(136),k=a(99),S=a(203),A=a(285),P=a(115),F=a.p+"static/media/marker.7a162fbb.svg",C=function(e){var t={};return new N.a({source:e,style:function(e){var a=e.get("features").length,c=t[a];if(!c||1===a){if(1===a){var n=e.get("features")[0].getProperties().g_ea_lib_vx;c=[new P.b({image:new A.a({src:F,color:"#e63946",anchor:[.5,1],scale:.5}),text:new S.a({text:n,offsetY:10})})]}else c=[new P.b({image:new y.a({radius:15,stroke:new k.a({color:"#e63946"}),fill:new w.a({color:"#1d3557"})}),text:new S.a({text:a.toString(),fill:new w.a({color:"#fff"})})})];t[a]=c}return c}})},K=a(485),E=function(e){return new K.a({distance:40,minDistance:20,source:e})},R=a(284),D=a(282),z=function(){return new R.a({maxZoom:19,source:new D.a({url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"})})},V=(Math.floor,Math.random,a(164)),q=a.n(V),T="https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup",B=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=T+'&q=cod_aff_form%3D"'.concat(t,'"'),e.next=4,q.a.get(a);case 4:if(!(c=e.sent).data||1!==c.data.nhits){e.next=7;break}return e.abrupt("return",c.data.records[0].fields);case 7:return e.abrupt("return",{});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){return void 0!==e[t]?e[t]:"NaN"},L=function(e){var t=window.open(e,"_blank");t&&t.focus()},M=function(e){var t=Object(c.useState)(),a=Object(d.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(),r=Object(d.a)(i,2),o=r[0],l=r[1],u=Object(c.useRef)();return Object(c.useEffect)((function(){var t,a=new _.a,c=new m.a({target:null!==(t=u.current)&&void 0!==t?t:void 0,layers:[z(),C(E(a))],view:new x.a({projection:"EPSG:3857",center:[0,0],zoom:2}),controls:[]});c.addEventListener("singleclick",(function(t){return function(e,t,a){var c=[];if(t.forEachFeatureAtPixel(e.pixel,(function(e){return c.push(e)})),console.log(c),1===c.length&&1===c[0].getProperties().features.length){var n=c[0].getProperties().features[0].getProperties();console.log(n),n.cod_aff_form&&a(n.cod_aff_form)}}(t,c,e.loadSchool)})),s(c),l(a)}),[]),Object(c.useEffect)((function(){if(o&&0!==e.schoolsData.length){var t=e.schoolsData.filter((function(e){return void 0!==e.g_olocalisation_des_formations})).map((function(e){var t=e.g_olocalisation_des_formations,a=new v.a({geometry:new O.a(Object(g.o)(t.reverse(),"EPSG:4326","EPSG:3857"))});return a.setProperties(Object(h.a)({},e)),a}));t&&(o.clear(),o.addFeatures(t),n&&n.getView().fit(o.getExtent(),{padding:[100,100,100,100]}))}}),[e.schoolsData]),Object(p.jsxs)("div",{className:"pcs-map-fragment",children:[Object(p.jsx)("h1",{className:"pcs-map-title",children:"Carte des formations"}),Object(p.jsx)("div",{className:"pcs-map-container",children:Object(p.jsx)("div",{ref:u,className:"pcs-map"})})]})},G=a(486),J=a(494),W=a(273),Y=a(113),Z=a(134),H=function(e){var t=[{key:"Nombre de candidates",value:e.count_candidat_girls,fill:"#e63946"},{key:"Nombre de candidats",value:e.count_candidat_boys,fill:"#a8dadc"}],a=[{key:"Nombre d'accept\xe9es",value:e.count_accepted_girls,fill:"#6b6fdb"},{key:"Nombre d'accept\xe9s",value:e.count_accepted_boys,fill:"#76d169"}],c=(e.count_candidat_girls/(e.count_candidat_girls+e.count_candidat_boys)*100).toFixed(0),n=(e.count_accepted_girls/(e.count_accepted_girls+e.count_accepted_boys)*100).toFixed(0),s="Soit ".concat(c,"% de candidates et ").concat(n,"% ayant accept\xe9 d\xe9finitivement la proposition");return Object(p.jsx)($,{title:e.title,description:s,children:Object(p.jsx)(G.a,{width:"100%",height:250,children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(W.a,{data:t,startAngle:0,endAngle:180,isAnimationActive:!1,dataKey:"value",nameKey:"key",cx:"50%",cy:"100%",innerRadius:80,outerRadius:120,children:Object(p.jsx)(Y.a,{position:"insideTop",fill:"#000",stroke:"none",dataKey:"value"})}),Object(p.jsx)(W.a,{data:a,isAnimationActive:!1,startAngle:0,endAngle:180,dataKey:"value",nameKey:"key",cx:"50%",cy:"100%",innerRadius:20,outerRadius:60,children:Object(p.jsx)(Y.a,{position:"inside",fill:"#000",stroke:"none",dataKey:"value"})}),Object(p.jsx)(Z.a,{iconSize:10,layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})},Q=a(490),U=a(287),X=function(e){var t=e.title,a=e.count_classed,c=e.count_proposition_accepted,n=e.count_proposition_received,s=e.count_candidates,i=function(e,t){return"".concat(e," ").concat(t," (").concat((e/s*100).toFixed(0),"%)")},r=[{name:"Nombre de candidats",value:s,fill:"#e63946",label:i(s,"candidat.e.s")},{name:"Nombre de candidats class\xe9s",value:a,fill:"#a8dadc",label:i(a,"class\xe9.e.s")},{name:"Nombre de candidats ayant recu une proposition",value:n,fill:"#457b9d",label:i(n,"admis.e.s")},{name:"Nombre de candidats ayant accept\xe9 la proposition",value:c,fill:"#1d3557",label:i(c,"ont accept\xe9")}];return Object(p.jsx)($,{title:t,children:Object(p.jsx)(G.a,{width:"100%",height:250,children:Object(p.jsx)(Q.a,{children:Object(p.jsx)(U.a,{dataKey:"value",data:r,isAnimationActive:!1,children:Object(p.jsx)(Y.a,{position:"insideTopLeft",offset:10,fill:"#000",stroke:"none",dataKey:"label"})})})})})},$=(a(478),function(e){var t=e.children,a=e.title,c=e.description;return Object(p.jsxs)("div",{className:"pcs-statscard",children:[Object(p.jsx)("h1",{className:"pcs-statscard-title",children:a}),Object(p.jsxs)("div",{className:"pcs-statscard-content",children:[t,c&&Object(p.jsx)("p",{className:"pcs-statscard-description",children:c})]})]})}),ee=function(e){var t=e.title,a=e.count_ab,c=e.count_b,n=e.count_nr,s=e.count_sm,i=e.count_tb,r=e.count_tbf,o=function(e){return e?"".concat(e):""},l=[{name:"Tr\xe8s bien (avec f\xe9licitations)",value:r,fill:"#a639d6",label:o(r)},{name:"Tr\xe8s bien",value:i,fill:"#e63946",label:o(i)},{name:"Bien",value:c,fill:"#a8dadc",label:o(c)},{name:"Assez bien",value:a,fill:"#457b9d",label:o(a)},{name:"Sans mention",value:s,fill:"#1d3557",label:o(s)},{name:"Non r\xe9f\xe9renc\xe9",value:n,fill:"#2e2e2e",label:o(n)}];return Object(p.jsx)($,{title:t,children:Object(p.jsx)(G.a,{width:"100%",height:250,children:Object(p.jsxs)(J.a,{children:[Object(p.jsx)(W.a,{data:l,cx:"50%",cy:"50%",isAnimationActive:!1,innerRadius:40,outerRadius:80,dataKey:"value",labelLine:!1,children:Object(p.jsx)(Y.a,{position:"outside",fontSize:20,offset:6,fill:"#000",stroke:"#000",strokeWidth:1,dataKey:"label"})}),Object(p.jsx)(Z.a,{iconSize:10,layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})},te=a(491),ae=a(278),ce=a(279),ne=a(492),se=a(277),ie=function(e){var t=e.title,a=e.count_bac,c=e.count_end_pp,n=e.count_start_pp,s=function(e){return"".concat(e.toFixed(0),"%")},i=[{name:"27 mai",value:n,label:s(n)},{name:"17 juin",value:a,label:s(a)},{name:"16 juillet",value:c,label:s(c)}],r=Object(p.jsxs)("ul",{style:{textAlign:"left"},children:[Object(p.jsx)("li",{children:"27 mai : ouverture de Parcoursup"}),Object(p.jsx)("li",{children:"17 juin : avant le baccalaur\xe9at"}),Object(p.jsx)("li",{children:"16 juillet : fin de proc\xe9dure Phase Principale"})]});return Object(p.jsx)($,{title:t,description:r,children:Object(p.jsx)(G.a,{width:"100%",height:250,children:Object(p.jsxs)(te.a,{data:i,margin:{top:20,left:0,right:40,bottom:0},children:[Object(p.jsx)(ae.a,{dataKey:"name",angle:-30,type:"category",interval:0}),Object(p.jsx)(ce.a,{}),Object(p.jsx)(ne.a,{stroke:"#eee",strokeDasharray:"5 5"}),Object(p.jsx)(se.a,{type:"linear",dataKey:"value",stroke:"#1d3557",fill:"#1d3557",isAnimationActive:!1,children:Object(p.jsx)(Y.a,{position:"insideTop",fill:"#000",stroke:"#000",strokeWidth:1,dataKey:"label"})})]})})})},re=["axios","html2canvas","ol","react","react-dom","react-helmet","react-icons","react-scripts","recharts","sass","use-react-screenshot"],oe=(a(479),function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1];return a?Object(p.jsxs)("div",{className:"pcs-about-open",children:[Object(p.jsx)("div",{className:"pcs-about-close",children:Object(p.jsx)("span",{onClick:function(){return n(!1)},children:"fermer"})}),Object(p.jsx)("div",{className:"pcs-about-made-by",children:"Application d\xe9velopp\xe9e par St\xe9phane BRANLY (J'ai dev \xe7a)"}),Object(p.jsxs)("div",{className:"pcs-about-tags",onClick:function(){return L("https://github.com/StephaneBranly/parcoursup-stats")},children:[Object(p.jsx)("div",{className:"pcs-about-repo",children:"D\xe9pot de code \ud83d\udcbb"}),Object(p.jsx)("div",{className:"pcs-about-sponsor",onClick:function(){return L("https://www.paypal.com/paypalme/StephaneBranly")},children:"Sponsor \ud83d\udc9c"}),Object(p.jsx)("div",{className:"pcs-about-data",onClick:function(){return L("https://data.enseignementsup-recherche.gouv.fr/pages/parcoursupdata/?disjunctive.fili")},children:"Donn\xe9es publiques \ud83d\uddc3"})]}),Object(p.jsxs)("div",{className:"pcs-about-packages",children:[Object(p.jsx)("div",{className:"pcs-about-packages-label",children:"Modules utilis\xe9s \ud83d\udce6 :"}),Object(p.jsx)("ul",{children:re.map((function(e){return Object(p.jsx)("li",{onClick:function(){return L("https://www.npmjs.com/package/".concat(e))},children:e})}))})]})]}):Object(p.jsxs)("div",{className:"pcs-about-closed",children:[Object(p.jsx)("div",{children:"Session 2021"}),Object(p.jsx)("div",{className:"pcs-about-button",onClick:function(){return n(!0)},children:"A propos"})]})}),le=(a(480),function(e){var t=e.currentSchool;return t?Object(p.jsxs)("div",{className:"pcs-formationinfos-fragment",children:[Object(p.jsx)(u.a,{children:Object(p.jsxs)("title",{children:["Parcoursup - Statistiques - ",I(t,"g_ea_lib_vx")]})}),Object(p.jsx)("h1",{className:"pcs-formationinfos-title",children:"Informations g\xe9n\xe9rales"}),Object(p.jsxs)("div",{className:"pcs-formationinfos-main",children:[Object(p.jsx)("h1",{className:"pcs-schoolname",children:I(t,"fil_lib_voe_acc")}),Object(p.jsx)("p",{children:Object(p.jsxs)("ul",{className:"pcs-stats-ul",children:[Object(p.jsxs)("li",{children:["\ud83d\uddc2 ",I(t,"select_form")]}),Object(p.jsxs)("li",{children:["\ud83c\udfe2 ",I(t,"g_ea_lib_vx")," -"," ",Object(p.jsx)("i",{children:I(t,"contrat_etab")})]}),Object(p.jsxs)("li",{children:["\ud83d\uddfa ",I(t,"dep_lib")," (",I(t,"dep"),") -"," ",I(t,"region_etab_aff")]})]})})]}),Object(p.jsx)("div",{className:"pcs-formationinfos-stats",children:Object(p.jsxs)("p",{children:[Object(p.jsx)("b",{children:"En 2021 :"}),Object(p.jsxs)("ul",{className:"pcs-stats-ul",children:[Object(p.jsxs)("li",{children:["\ud83c\udf93 ",Object(p.jsx)("b",{children:I(t,"capa_fin")})," places disponibles"]}),Object(p.jsxs)("li",{children:["\ud83d\udcc4 ",Object(p.jsx)("b",{children:I(t,"voe_tot")})," voeux enregistr\xe9s"]}),Object(p.jsx)("li",{children:Object(p.jsx)("b",{children:"\ud83d\uddc2 Rangs des derniers appel\xe9s par groupe :"})}),function(){if(t)return[1,2,3,4,5].map((function(e){var a=I(t,"ran_grp".concat(e)),c=I(t,"lib_grp".concat(e));return[e,Number(a),c]})).filter((function(e){var t=Object(d.a)(e,3),a=(t[0],t[1]),c=t[2];return"NaN"!==a&&0!==a&&"NaN"!==c&&""!==c})).map((function(e){var t=Object(d.a)(e,3),a=(t[0],t[1]),c=t[2];return Object(p.jsxs)("li",{children:[c," : ",Object(p.jsxs)("b",{children:[a,"\xe8me"]})]})}))}(),function(){if(t&&"NaN"!==I(t,"pct_aca_orig_idf"))return Object(p.jsxs)("li",{children:["\ud83d\udcda ",Object(p.jsxs)("b",{children:[Number(I(t,"pct_aca_orig_idf")).toFixed(0),"%"]})," ","d'admis.e.s n\xe9obachelier.e.s issu.e.s de la m\xeame acad\xe9mie (Paris/Cr\xe9tail/Versailles r\xe9unies)"]})}(),function(){if(t&&"NaN"!==I(t,"pct_etab_orig"))return Object(p.jsxs)("li",{children:["\ud83c\udfe2 ",Object(p.jsxs)("b",{children:[Number(I(t,"pct_etab_orig")).toFixed(0),"%"]})," ","d'admis.e.s n\xe9obachelier.e.s issu.e.s du m\xeame \xe9tablissement"]})}()]})]})}),Object(p.jsxs)("div",{className:"pcs-formationinfo-statscard-wrapper",children:[Object(p.jsx)(H,{count_candidat_boys:I(t,"voe_tot")-I(t,"voe_tot_f"),count_candidat_girls:I(t,"voe_tot_f"),count_accepted_boys:I(t,"acc_tot")-I(t,"acc_tot_f"),count_accepted_girls:I(t,"acc_tot_f"),title:"Proportion de candidates / candidats"}),Object(p.jsx)(X,{count_candidates:I(t,"nb_voe_pp"),count_classed:I(t,"nb_cla_pp"),count_proposition_received:I(t,"prop_tot"),count_proposition_accepted:I(t,"acc_tot"),title:"S\xe9lectivit\xe9 de la formation"}),Object(p.jsx)(ee,{count_tbf:I(t,"acc_tbf"),count_tb:I(t,"acc_tb"),count_b:I(t,"acc_b"),count_ab:I(t,"acc_ab"),count_sm:I(t,"acc_sansmention"),count_nr:I(t,"acc_mention_nonrenseignee"),title:"Mention au bac des n\xe9obachelier.e.s"}),Object(p.jsx)(ie,{count_start_pp:I(t,"pct_acc_debutpp"),count_bac:I(t,"pct_acc_datebac"),count_end_pp:I(t,"pct_acc_finpp"),title:"Vitesse de remplissage"})]})]}):Object(p.jsxs)("div",{className:"pcs-formationinfos-fragment",children:[Object(p.jsx)("h1",{className:"pcs-formationinfos-title",children:"Informations g\xe9n\xe9rales"}),Object(p.jsx)("div",{className:"pcs-formationinfos-main",children:Object(p.jsx)("h1",{className:"pcs-schoolname",children:"Selectionnez une formation"})})]})});var de=function(){var e=Object(c.useState)("findFormation"),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),i=Object(d.a)(s,2),r=i[0],b=i[1],j=Object(c.useState)([]),h=Object(d.a)(j,2),m=h[0],x=h[1],_=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:a=e.sent,console.log(a),b(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=!1,a=0;case 3:if(t){e.next=12;break}return c=T+"&q=&rows=100&start=".concat(a,"&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations"),e.next=7,q.a.get(c);case 7:(n=e.sent).data&&(a+=n.data.records.length,x(m.concat(n.data.records.map((function(e){return e.fields}))))),t=!0,e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("error");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)("section",{children:[Object(p.jsxs)(u.a,{children:[Object(p.jsx)("title",{children:"Parcoursup - Statistiques"}),Object(p.jsx)("meta",{name:"description",content:"Visualiseur des donn\xe9es publiques de Parcoursup"})]}),Object(p.jsx)(f,{currentView:a,setView:n}),Object(p.jsx)("section",{className:"pcs-main-section",children:function(){switch(a){case"findFormation":return Object(p.jsx)(M,{schoolsData:m,dataAttribution:"",loadSchool:_});case"seeFormationInfos":return Object(p.jsx)(le,{currentSchool:r});default:return Object(p.jsx)("p",{children:"Seems like something is broken :( Reload the page"})}}()}),Object(p.jsx)(oe,{})]})},ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,495)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(de,{})}),document.getElementById("root")),ue()}},[[481,1,2]]]);
//# sourceMappingURL=main.d0e2ed26.chunk.js.map
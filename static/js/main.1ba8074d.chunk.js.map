{"version":3,"sources":["components/Header/Header.tsx","utils/pickRandomItem.ts","global/parcoursupAPI.ts","utils/loadFormationData.ts","utils/getField.ts","components/FormationInfos/FormationInfos.tsx","assets/marker.svg","components/MapWrapper/clusterLayer.ts","components/MapWrapper/clusterSource.ts","components/MapWrapper/osmLayer.ts","components/MapWrapper/MapWrapper.tsx","utils/clickMap.ts","components/GirlBoyProportion/GirlBoyProportion.tsx","components/FunnelCandidates/FunnelCandidates.tsx","components/StatsCard/StatsCard.tsx","components/BaccalaureatMention/BaccalaureatMention.tsx","components/FillingSpeed/FillingSpeed.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Header","className","Math","floor","random","parcoursupAPI","loadFormationData","code_formation","a","requestURL","axios","get","result","data","nhits","records","fields","getField","school","fieldName","undefined","FormationInfos","props","s","currentSchool","map","grpNumber","rank","groupLabel","Number","filter","group","renderRankLastCalled","renderSameAcademy","renderSameSchool","count_candidat_boys","count_candidat_girls","count_accepted_boys","count_accepted_girls","title","count_candidates","count_classed","count_proposition_received","count_proposition_accepted","count_tb","count_b","count_ab","count_sm","count_nr","count_start_pp","count_bac","count_end_pp","clusterLayer","clusterSource","styleCache","VectorLayer","source","style","feature","size","length","schoolName","getProperties","Style","image","Icon","src","markerIcon","color","anchor","scale","text","Text","offsetY","Circle","radius","stroke","Stroke","fill","Fill","toString","Cluster","distance","minDistance","osmLayer","TileLayer","maxZoom","XYZ","url","MapWrapper","useState","setMap","setSource","mapElement","useRef","useEffect","new_source","VectorSource","initialMap","Map","target","current","layers","view","View","projection","center","zoom","controls","addEventListener","e","evt","setSelectedSchoolID","features","forEachFeatureAtPixel","pixel","f","push","console","log","properties","clickMap","loadSchool","schoolsData","entry","coord","feat","Feature","geometry","Point","transform","reverse","setProperties","clear","addFeatures","getView","fit","getExtent","padding","ref","GirlBoyProportion","dataCandidats","key","value","dataAccepted","pourcentageCandidates","toFixed","pourcentageAccepted","description","ResponsiveContainer","width","height","PieChart","Pie","startAngle","endAngle","isAnimationActive","dataKey","nameKey","cx","cy","innerRadius","outerRadius","LabelList","position","Legend","iconSize","layout","verticalAlign","align","FunnelCandidates","createLabel","val","name","label","FunnelChart","Funnel","offset","StatsCard","children","BaccalaureatMention","total","FillingSpeed","AreaChart","XAxis","angle","YAxis","CartesianGrid","strokeDasharray","Area","type","App","selectedSchool","setSelectedSchool","setSchoolsData","schoolID","loadData","finished","dataLength","concat","r","error","Helmet","content","dataAttribution","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ba8074d.chunk.js","sourcesContent":["import logoParcoursup from '../../assets/logoParcoursup.svg'\n\nimport './Header.scss'\n\nconst Header = () => {\n    return (\n        <div className=\"pcs-header\">\n            {/* <img\n                className=\"pcs-header-logo\"\n                src={logoParcoursup}\n                alt=\"Logo Parcoursup\"\n            /> */}\n            <h1 className=\"pcs-header-title\">\n                📊 Statistiques sur la plateforme\n            </h1>\n        </div>\n    )\n}\n\nexport default Header\n","const { floor, random } = Math\n\nexport const pickRandomItem = <T = any>(items: T[]) => {\n    return items[floor(random() * items.length)]\n}\n","export const parcoursupAPI =\n    'https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup'\n","import axios from 'axios'\nimport { parcoursupAPI } from 'global/parcoursupAPI'\n\nexport const loadFormationData = async (code_formation: string) => {\n    try {\n        const requestURL =\n            parcoursupAPI + `&q=cod_aff_form%3D\"${code_formation}\"`\n        const result = await axios.get(requestURL)\n        if (result.data && result.data.nhits === 1) {\n            return result.data.records[0].fields\n        }\n        return {}\n    } catch (e) {\n        return {}\n    }\n}\n","export const getField = (school: Record<string, any>, fieldName: string) => {\n    if (school[fieldName] !== undefined) return school[fieldName]\n    return 'NaN'\n}\n","import {\n    BaccalaureatMention,\n    FillingSpeed,\n    FunnelCandidates,\n    GirlBoyProportion,\n} from 'components'\nimport { getField } from 'utils'\nimport './FormationInfos.scss'\n\nexport interface FormationInfosProps {\n    currentSchool: Record<string, any> | undefined\n}\n\nconst FormationInfos = (props: FormationInfosProps) => {\n    const { currentSchool } = props\n    const s = currentSchool\n\n    const renderRankLastCalled = () => {\n        if (!s) return\n        return [1, 2, 3, 4, 5]\n            .map((grpNumber: number) => {\n                const rank = getField(s, `ran_grp${grpNumber}`)\n                const groupLabel = getField(s, `lib_grp${grpNumber}`)\n                return [grpNumber, Number(rank), groupLabel]\n            })\n            .filter(\n                ([index, rank, group]) =>\n                    rank !== 'NaN' &&\n                    rank !== 0 &&\n                    group !== 'NaN' &&\n                    group !== ''\n            )\n            .map(([index, rank, group]) => (\n                <li>\n                    {group} : <b>{rank}</b>\n                </li>\n            ))\n    }\n\n    const renderSameAcademy = () => {\n        if (!s) return\n        if (getField(s, 'pct_aca_orig_idf') === 'NaN') return\n        return (\n            <li>\n                📚 <b>{getField(s, 'pct_aca_orig_idf')}%</b> d'admis.e.s\n                néobachelier.e.s issu.e.s de la même académie\n                (Paris/Crétail/Versailles réunies)\n            </li>\n        )\n    }\n    const renderSameSchool = () => {\n        if (!s) return\n        if (getField(s, 'pct_etab_orig') === 'NaN') return\n        return (\n            <li>\n                🏢 <b>{getField(s, 'pct_etab_orig')}%</b> d'admis.e.s\n                néobachelier.e.s issu.e.s du même établissement\n            </li>\n        )\n    }\n\n    if (!s)\n        return (\n            <div className=\"pcs-formationinfos-fragment\">\n                <h1 className=\"pcs-formationinfos-title\">\n                    Informations générales\n                </h1>\n                <div className=\"pcs-formationinfos-main\">\n                    <h1 className=\"pcs-schoolname\">\n                        Selectionnez une formation\n                    </h1>\n                </div>\n            </div>\n        )\n    return (\n        <div className=\"pcs-formationinfos-fragment\">\n            <h1 className=\"pcs-formationinfos-title\">Informations générales</h1>\n            <div className=\"pcs-formationinfos-main\">\n                <h1 className=\"pcs-schoolname\">\n                    {getField(s, 'fil_lib_voe_acc')}\n                </h1>\n                <p>\n                    <ul className=\"pcs-stats-ul\">\n                        <li>🗂 {getField(s, 'select_form')}</li>\n                        <li>\n                            🏢 {getField(s, 'g_ea_lib_vx')} -{' '}\n                            <i>{getField(s, 'contrat_etab')}</i>\n                        </li>\n                        <li>\n                            🗺 {getField(s, 'dep_lib')} ({getField(s, 'dep')}) -{' '}\n                            {getField(s, 'region_etab_aff')}\n                        </li>\n                    </ul>\n                </p>\n            </div>\n            <div className=\"pcs-formationinfos-stats\">\n                <p>\n                    <b>En 2020 :</b>\n                    <ul className=\"pcs-stats-ul\">\n                        <li>\n                            🎓 <b>{getField(s, 'capa_fin')}</b> places\n                            disponibles\n                        </li>\n                        <li>\n                            📄 <b>{getField(s, 'voe_tot')}</b> voeux enregistrés\n                        </li>\n                        <li>\n                            <b>🗂 Rangs des derniers appelés :</b>\n                        </li>\n                        {renderRankLastCalled()}\n                        {renderSameAcademy()}\n\n                        {renderSameSchool()}\n                    </ul>\n                </p>\n            </div>\n\n            <div className=\"pcs-formationinfo-statscard-wrapper\">\n                <GirlBoyProportion\n                    count_candidat_boys={\n                        getField(s, 'voe_tot') - getField(s, 'voe_tot_f')\n                    }\n                    count_candidat_girls={getField(s, 'voe_tot_f')}\n                    count_accepted_boys={\n                        getField(s, 'acc_tot') - getField(s, 'acc_tot_f')\n                    }\n                    count_accepted_girls={getField(s, 'acc_tot_f')}\n                    title={'Proportion de candidates / candidats'}\n                />\n                <FunnelCandidates\n                    count_candidates={getField(s, 'nb_voe_pp')}\n                    count_classed={getField(s, 'nb_cla_pp')}\n                    count_proposition_received={getField(s, 'prop_tot')}\n                    count_proposition_accepted={getField(s, 'acc_tot')}\n                    title={'Sélectivité de la formation'}\n                />\n                <BaccalaureatMention\n                    count_tb={getField(s, 'acc_tb')}\n                    count_b={getField(s, 'acc_b')}\n                    count_ab={getField(s, 'acc_ab')}\n                    count_sm={getField(s, 'acc_sansmention')}\n                    count_nr={getField(s, 'acc_mention_nonrenseignee')}\n                    title={'Mention au bac des néobachelier.e.s'}\n                />\n                <FillingSpeed\n                    count_start_pp={getField(s, 'pct_acc_debutpp')}\n                    count_bac={getField(s, 'pct_acc_datebac')}\n                    count_end_pp={getField(s, 'pct_acc_finpp')}\n                    title={'Vitesse de remplissage'}\n                />\n            </div>\n        </div>\n    )\n}\n\nexport default FormationInfos\n","export default __webpack_public_path__ + \"static/media/marker.7a162fbb.svg\";","import VectorLayer from 'ol/layer/Vector'\nimport Fill from 'ol/style/Fill'\nimport Circle from 'ol/style/Circle'\nimport Stroke from 'ol/style/Stroke'\nimport Text from 'ol/style/Text'\nimport Icon from 'ol/style/Icon'\nimport Style from 'ol/style/Style'\nimport markerIcon from '../../assets/marker.svg'\n\nconst clusterLayer = (clusterSource: any) => {\n    const styleCache: Record<string, Style[]> = {}\n    return new VectorLayer({\n        source: clusterSource,\n        style: (feature) => {\n            const size = feature.get('features').length\n            let style = styleCache[size]\n            if (!style || size === 1) {\n                if (size === 1) {\n                    const schoolName = feature\n                        .get('features')[0]\n                        .getProperties()['g_ea_lib_vx']\n                    style = [\n                        new Style({\n                            image: new Icon({\n                                src: markerIcon,\n                                color: '#e63946',\n                                anchor: [0.5, 1],\n                                scale: 0.5,\n                            }),\n                            text: new Text({\n                                text: schoolName,\n                                offsetY: 10,\n                            }),\n                        }),\n                    ]\n                } else {\n                    style = [\n                        new Style({\n                            image: new Circle({\n                                radius: 15,\n                                stroke: new Stroke({\n                                    color: '#e63946',\n                                }),\n                                fill: new Fill({\n                                    color: '#1d3557',\n                                }),\n                            }),\n                            text: new Text({\n                                text: size.toString(),\n                                fill: new Fill({\n                                    color: '#fff',\n                                }),\n                            }),\n                        }),\n                    ]\n                }\n                styleCache[size] = style\n            }\n            return style\n        },\n    })\n}\n\nexport default clusterLayer\n","import Geometry from 'ol/geom/Geometry'\nimport { Cluster, Vector as VectorSource } from 'ol/source'\n\nconst clusterSource = (source: VectorSource<Geometry>) => {\n    return new Cluster({\n        distance: 40,\n        minDistance: 20,\n        source: source,\n    })\n}\n\nexport default clusterSource\n","import TileLayer from 'ol/layer/Tile'\nimport XYZ from 'ol/source/XYZ'\n\nexport const osmLayer = () => {\n    return new TileLayer({\n        maxZoom: 19,\n        source: new XYZ({\n            url: 'https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n        }),\n    })\n}\n\nexport default osmLayer\n","import { useState, useRef, useEffect, RefObject } from 'react'\n\nimport './MapWrapper.scss'\n\nimport Map from 'ol/Map'\nimport View from 'ol/View'\nimport VectorSource from 'ol/source/Vector'\nimport Geometry from 'ol/geom/Geometry'\nimport { Feature, MapBrowserEvent } from 'ol'\nimport Point from 'ol/geom/Point'\nimport { transform } from 'ol/proj'\n\nimport clusterLayer from './clusterLayer'\nimport clusterSource from './clusterSource'\nimport osmLayer from './osmLayer'\nimport { clickMap } from 'utils'\n\nexport interface MapWrapperProps {\n    schoolsData: Record<string, any>[]\n    loadSchool: (schoolID: string) => void\n    dataAttribution: string\n}\n\nconst MapWrapper = (props: MapWrapperProps) => {\n    const [map, setMap] = useState<Map>()\n    const [source, setSource] = useState<VectorSource<Geometry>>()\n\n    const mapElement = useRef() as RefObject<HTMLDivElement>\n\n    useEffect(() => {\n        const new_source = new VectorSource()\n\n        const initialMap = new Map({\n            target: mapElement.current ?? undefined,\n            layers: [osmLayer(), clusterLayer(clusterSource(new_source))],\n            view: new View({\n                projection: 'EPSG:3857',\n                center: [0, 0],\n                zoom: 2,\n            }),\n            controls: [],\n        })\n\n        initialMap.addEventListener('singleclick', (e) =>\n            clickMap(\n                e as MapBrowserEvent<UIEvent>,\n                initialMap,\n                props.loadSchool\n            )\n        )\n        // save map and vector layer references to state\n        setMap(initialMap)\n        setSource(new_source)\n    }, [])\n\n    useEffect(() => {\n        if (!source || props.schoolsData.length === 0) return\n\n        const features = props.schoolsData\n            .filter((entry) => {\n                return entry['g_olocalisation_des_formations'] !== undefined\n            })\n            .map((entry) => {\n                const coord = entry['g_olocalisation_des_formations']\n                const feat = new Feature({\n                    geometry: new Point(\n                        transform(coord.reverse(), 'EPSG:4326', 'EPSG:3857')\n                    ),\n                })\n                feat.setProperties({ ...entry })\n                return feat\n            })\n\n        if (!features) return\n        source.clear()\n        source.addFeatures(features)\n        if (!map) return\n        map.getView().fit(source.getExtent(), {\n            padding: [100, 100, 100, 100],\n        })\n    }, [props.schoolsData])\n\n    return (\n        <div className=\"pcs-map-fragment\">\n            <h1 className=\"pcs-map-title\">Carte des formations</h1>\n            <div className=\"pcs-map-container\">\n                <div ref={mapElement} className=\"pcs-map\"></div>\n            </div>\n        </div>\n    )\n}\n\nexport default MapWrapper\n","import { Map, MapBrowserEvent } from 'ol'\n\nexport const clickMap = (\n    evt: MapBrowserEvent<UIEvent>,\n    map: Map,\n    setSelectedSchoolID: (id: string) => void\n) => {\n    const features: any[] = []\n    map.forEachFeatureAtPixel(evt.pixel, (f: any) => features.push(f))\n    console.log(features)\n    if (features.length !== 1) return\n    if (features[0].getProperties().features.length !== 1) return\n    const properties = features[0].getProperties().features[0].getProperties()\n    console.log(properties)\n    if (properties['cod_aff_form'])\n        setSelectedSchoolID(properties['cod_aff_form'])\n}\n","import { StatsCard } from 'components'\nimport { ResponsiveContainer, PieChart, Pie, Legend, LabelList } from 'recharts'\n\nexport interface GirlBoyProportionProps {\n    count_candidat_boys: number\n    count_candidat_girls: number\n    count_accepted_boys: number\n    count_accepted_girls: number\n    title: string\n}\n\nconst GirlBoyProportion = (props: GirlBoyProportionProps) => {\n    const dataCandidats = [\n        {\n            key: 'Nombre de candidates',\n            value: props.count_candidat_girls,\n            fill: '#e63946',\n        },\n        {\n            key: 'Nombre de candidats',\n            value: props.count_candidat_boys,\n            fill: '#a8dadc',\n        },\n    ]\n\n    const dataAccepted = [\n        {\n            key: \"Nombre d'acceptées\",\n            value: props.count_accepted_girls,\n            fill: '#6b6fdb',\n        },\n        {\n            key: \"Nombre d'acceptés\",\n            value: props.count_accepted_boys,\n            fill: '#76d169',\n        },\n    ]\n\n    const pourcentageCandidates = (\n        (props.count_candidat_girls /\n            (props.count_candidat_girls + props.count_candidat_boys)) *\n        100\n    ).toFixed(0)\n    const pourcentageAccepted = (\n        (props.count_accepted_girls /\n            (props.count_accepted_girls + props.count_accepted_boys)) *\n        100\n    ).toFixed(0)\n    const description = `Soit ${pourcentageCandidates}% de candidates et ${pourcentageAccepted}% ayant accepté définitivement la proposition`\n\n    return (\n        <StatsCard title={props.title} description={description}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <PieChart>\n                    <Pie\n                        data={dataCandidats}\n                        startAngle={0}\n                        endAngle={180}\n                        isAnimationActive={false}\n                        dataKey=\"value\"\n                        nameKey=\"key\"\n                        cx=\"50%\"\n                        cy=\"100%\"\n                        innerRadius={80}\n                        outerRadius={120}\n                    >\n                        <LabelList\n                            position=\"insideTop\"\n                            fill=\"#000\"\n                            stroke=\"none\"\n                            dataKey=\"value\"\n                        />\n                    </Pie>\n\n                    <Pie\n                        data={dataAccepted}\n                        isAnimationActive={false}\n                        startAngle={0}\n                        endAngle={180}\n                        dataKey=\"value\"\n                        nameKey=\"key\"\n                        cx=\"50%\"\n                        cy=\"100%\"\n                        innerRadius={20}\n                        outerRadius={60}\n                    >\n                        <LabelList\n                            position=\"inside\"\n                            fill=\"#000\"\n                            stroke=\"none\"\n                            dataKey=\"value\"\n                        />\n                    </Pie>\n                    <Legend\n                        iconSize={10}\n                        layout=\"horizontal\"\n                        verticalAlign=\"bottom\"\n                        align=\"center\"\n                    />\n                </PieChart>\n            </ResponsiveContainer>\n        </StatsCard>\n    )\n}\n\nexport default GirlBoyProportion\n","import { StatsCard } from 'components'\nimport { ResponsiveContainer, Funnel, FunnelChart, LabelList } from 'recharts'\n\nexport interface FunnelCandidatesProps {\n    count_candidates: number\n    count_classed: number\n    count_proposition_received: number\n    count_proposition_accepted: number\n    title: string\n}\n\nconst FunnelCandidates = (props: FunnelCandidatesProps) => {\n    const {\n        title,\n        count_classed,\n        count_proposition_accepted,\n        count_proposition_received,\n        count_candidates,\n    } = props\n    const createLabel = (val: number, description: string): string => {\n        return `${val} ${description} (${(\n            (val / count_candidates) *\n            100\n        ).toFixed(0)}%)`\n    }\n\n    const data = [\n        {\n            name: 'Nombre de candidats',\n            value: count_candidates,\n            fill: '#e63946',\n            label: createLabel(count_candidates, 'candidat.e.s'),\n        },\n        {\n            name: 'Nombre de candidats classés',\n            value: count_classed,\n            fill: '#a8dadc',\n            label: createLabel(count_classed, 'classé.e.s'),\n        },\n        {\n            name: 'Nombre de candidats ayant recu une proposition',\n            value: count_proposition_received,\n            fill: '#457b9d',\n            label: createLabel(count_proposition_received, 'admis.e.s'),\n        },\n        {\n            name: 'Nombre de candidats ayant accepté la proposition',\n            value: count_proposition_accepted,\n            fill: '#1d3557',\n            label: createLabel(count_proposition_accepted, 'ont accepté'),\n        },\n    ]\n\n    return (\n        <StatsCard title={title}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <FunnelChart>\n                    <Funnel\n                        dataKey=\"value\"\n                        data={data}\n                        isAnimationActive={false}\n                    >\n                        <LabelList\n                            position=\"insideTopLeft\"\n                            offset={10}\n                            fill=\"#000\"\n                            stroke=\"none\"\n                            dataKey=\"label\"\n                        />\n                    </Funnel>\n                </FunnelChart>\n            </ResponsiveContainer>\n        </StatsCard>\n    )\n}\n\nexport default FunnelCandidates\n","import './StatsCard.scss'\nexport interface StatsCardProps {\n    children: JSX.Element\n    title: string\n    description?: string\n}\n\nconst StatsCard = (props: StatsCardProps) => {\n    const { children, title, description } = props\n\n    return (\n        <div className=\"pcs-statscard\">\n            <h1 className=\"pcs-statscard-title\">{title}</h1>\n            <div className=\"pcs-statscard-content\">\n                {children}\n                {description && (\n                    <p className=\"pcs-statscard-description\">{description}</p>\n                )}\n            </div>\n        </div>\n    )\n}\n\nexport default StatsCard\n","import { StatsCard } from 'components'\nimport { ResponsiveContainer, Pie, PieChart, Legend } from 'recharts'\n\nexport interface BaccalaureatMentionProps {\n    count_tb: number\n    count_b: number\n    count_ab: number\n    count_sm: number\n    count_nr: number\n    title: string\n}\n\nconst BaccalaureatMention = (props: BaccalaureatMentionProps) => {\n    const { title, count_ab, count_b, count_nr, count_sm, count_tb } = props\n\n    const total = count_ab + count_b + count_nr + count_sm + count_tb\n\n    const createLabel = (val: number): string => {\n        if (!val) return ''\n        return `${val} (${((val / total) * 100).toFixed(0)}%)`\n    }\n\n    const data = [\n        {\n            name: 'Très bien',\n            value: count_tb,\n            fill: '#e63946',\n            label: createLabel(count_tb),\n        },\n        {\n            name: 'Bien',\n            value: count_b,\n            fill: '#a8dadc',\n            label: createLabel(count_b),\n        },\n        {\n            name: 'Assez bien',\n            value: count_ab,\n            fill: '#457b9d',\n            label: createLabel(count_ab),\n        },\n        {\n            name: 'Sans mention',\n            value: count_sm,\n            fill: '#1d3557',\n            label: createLabel(count_sm),\n        },\n        {\n            name: 'Non référencé',\n            value: count_nr,\n            fill: '#2e2e2e',\n            label: createLabel(count_nr),\n        },\n    ]\n\n    return (\n        <StatsCard title={title}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <PieChart>\n                    <Pie\n                        data={data}\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        isAnimationActive={false}\n                        outerRadius={80}\n                        dataKey=\"value\"\n                        label\n                    >\n                        {/* <LabelList position=\"inside\" offset={10} fill=\"#000\" stroke=\"none\" dataKey=\"label\" /> */}\n                    </Pie>\n                    <Legend\n                        iconSize={10}\n                        layout=\"horizontal\"\n                        verticalAlign=\"bottom\"\n                        align=\"center\"\n                    />\n                </PieChart>\n            </ResponsiveContainer>\n        </StatsCard>\n    )\n}\n\nexport default BaccalaureatMention\n","import { StatsCard } from 'components'\nimport {\n    ResponsiveContainer,\n    CartesianGrid,\n    XAxis,\n    YAxis,\n    AreaChart,\n    Area,\n} from 'recharts'\n\nexport interface FillingSpeedProps {\n    count_start_pp: number\n    count_bac: number\n    count_end_pp: number\n    title: string\n}\n\nconst FillingSpeed = (props: FillingSpeedProps) => {\n    const { title, count_bac, count_end_pp, count_start_pp } = props\n\n    const data = [\n        {\n            name: 'Ouverture de Parcoursup (15 mai)',\n            value: count_start_pp,\n        },\n        {\n            name: 'Avant le baccalautéat (18 juin)',\n            value: count_bac,\n        },\n        {\n            name: 'Fin de procédure Phase Principale (19 juillet)',\n            value: count_end_pp,\n        },\n    ]\n\n    console.log(data)\n\n    return (\n        <StatsCard title={title}>\n            <ResponsiveContainer width=\"100%\" height={250}>\n                <AreaChart data={data}>\n                    <XAxis dataKey=\"name\" angle={90} />\n                    <YAxis />\n                    <CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\" />\n                    <Area\n                        type=\"linear\"\n                        label\n                        dataKey=\"value\"\n                        stroke=\"#1d3557\"\n                        fill=\"#1d3557\"\n                        isAnimationActive={false}\n                    />\n                </AreaChart>\n            </ResponsiveContainer>\n        </StatsCard>\n    )\n}\n\nexport default FillingSpeed\n","import { useEffect, useState } from 'react'\n\nimport './App.scss'\n\nimport { Helmet } from 'react-helmet'\n\nimport { FormationInfos, Header, MapWrapper } from './components'\nimport { parcoursupAPI } from './global/parcoursupAPI'\nimport axios from 'axios'\nimport { loadFormationData } from 'utils'\n\nfunction App() {\n    const [selectedSchool, setSelectedSchool] = useState<\n        Record<string, any> | undefined\n    >()\n    const [schoolsData, setSchoolsData] = useState<Record<string, any>[]>([])\n\n    const loadSchool = async (schoolID: string) => {\n        const result = await loadFormationData(schoolID)\n        console.log(result)\n        setSelectedSchool(result)\n    }\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    const loadData = async () => {\n        try {\n            let finished = false\n            let dataLength = 0\n            while (!finished) {\n                const requestURL =\n                    parcoursupAPI +\n                    `&q=&rows=1000&start=${dataLength}&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations`\n                const result = await axios.get(requestURL)\n                if (result.data) {\n                    dataLength += result.data.records.length\n                    setSchoolsData(\n                        schoolsData.concat(\n                            result.data.records.map(\n                                (r: { fields: any }) => r.fields\n                            )\n                        )\n                    )\n                }\n\n                finished = true\n            }\n        } catch (e) {\n            console.error('error')\n        }\n    }\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    return (\n        <section>\n            <Helmet>\n                <title>Parcoursup - Statistiques</title>\n                <meta\n                    name=\"description\"\n                    content=\"Visualiseur des données publiques de Parcoursup\"\n                />\n            </Helmet>\n            <Header />\n            <section className=\"pcs-main-section\">\n                <MapWrapper\n                    schoolsData={schoolsData}\n                    dataAttribution={''}\n                    loadSchool={loadSchool}\n                />\n                <FormationInfos currentSchool={selectedSchool} />\n            </section>\n        </section>\n    )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry)\n                getFID(onPerfEntry)\n                getFCP(onPerfEntry)\n                getLCP(onPerfEntry)\n                getTTFB(onPerfEntry)\n            }\n        )\n    }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}
(this["webpackJsonpparcoursup-stats"]=this["webpackJsonpparcoursup-stats"]||[]).push([[0],{115:function(e,t,a){},117:function(e,t,a){},121:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var r=a(19),s=a.n(r),n=a(86),c=a.n(n),o=(a(115),a(47)),i=a.n(o),u=a(54),l=a(50),f=(a(117),a(87)),p=a.p+"static/media/logoParcoursup.3da2a0da.svg",d=(a(121),a(14)),b=function(){return Object(d.jsxs)("div",{className:"pcs-header",children:[Object(d.jsx)("img",{className:"pcs-header-logo",src:p,alt:"Logo Parcoursup"}),Object(d.jsx)("h1",{className:"pcs-header-title",children:"\ud83d\udcca Statistiques sur la plateforme"})]})},j=(Math.floor,Math.random,a(66)),m=a.n(j),h="https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup",O=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h+'&q=cod_aff_form%3D"'.concat(t,'"'),e.next=4,m.a.get(a);case 4:if(!(r=e.sent).data||1!==r.data.nhits){e.next=7;break}return e.abrupt("return",r.data.records[0].fields);case 7:return e.abrupt("return",{});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=(a(141),function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),a=t[0],s=t[1],n=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("23324");case 2:t=e.sent,console.log(t),s(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){n()}),[]);var c=function(e){return a[e]?a[e]:"NaN"};return Object(d.jsxs)("div",{className:"pcs-formationinfos-fragment",children:[Object(d.jsx)("h1",{className:"pcs-formationinfos-title",children:"Informations sur la formation"}),Object(d.jsxs)("div",{className:"pcs-formationinfos",children:[Object(d.jsx)("h1",{className:"pcs-schoolname",children:c("lib_comp_voe_ins")}),Object(d.jsxs)("p",{children:["\ud83c\udfe2 ",c("g_ea_lib_vx"),Object(d.jsx)("br",{}),"\ud83d\uddfa ",c("dep_lib")," (",c("dep"),") -"," ",c("region_etab_aff")]})]})]})}),g=(a(142),a(91)),x=a(46),_=a(95),w=a(92),N=a(94),S=a(93),k=a(146),y=a(75),E=a(7),P=a(63),q=a(49),D=a(96),F=a(90),C=a.p+"static/media/marker.7a162fbb.svg",G=a(53),I=function(e){var t=Object(r.useState)(),a=Object(l.a)(t,2),s=a[0],n=a[1],c=Object(r.useState)(),o=Object(l.a)(c,2),i=o[0],u=o[1],f=Object(r.useRef)();return Object(r.useEffect)((function(){var e,t=new w.a({source:new N.a}),a=new g.a({target:null!==(e=f.current)&&void 0!==e?e:void 0,layers:[new _.a({maxZoom:19,source:new S.a({url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"})}),t],view:new x.a({projection:"EPSG:3857",center:[0,0],zoom:2}),controls:[]});n(a),u(t)}),[]),Object(r.useEffect)((function(){if(i&&0!==e.schoolsData.length){var t=e.schoolsData.map((function(e,t){var a=e.g_olocalisation_des_formations,r=new k.a({geometry:new y.a(Object(E.o)(a.reverse(),"EPSG:4326","EPSG:3857"))});return r.setStyle(new P.b({text:new F.a({text:e.\u00c9tablissement,offsetY:10,fill:new q.a({color:"#111"}),stroke:new G.a({color:"#e63946",width:2})}),image:new D.a({src:C,color:"#e63946",anchor:[.5,1],scale:.5})})),r})),a=i.getSource();a.clear(),a.addFeatures(t),s&&s.getView().fit(a.getExtent(),{padding:[100,100,100,100]})}}),[e.schoolsData]),Object(d.jsxs)("div",{className:"pcs-map-fragment",children:[Object(d.jsx)("h1",{className:"pcs-map-title",children:"Carte des formations"}),Object(d.jsx)("div",{className:"pcs-map-container",children:Object(d.jsx)("div",{ref:f,className:"pcs-map"})})]})};var L=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=(t[0],t[1],Object(r.useState)([])),s=Object(l.a)(a,2),n=s[0],c=s[1],o=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h+"&q=&rows=10&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations",e.next=4,m.a.get("https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup&q=&rows=10&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations");case 4:(t=e.sent).data&&c(t.data.records.map((function(e){return e.fields}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(d.jsxs)("section",{children:[Object(d.jsxs)(f.a,{children:[Object(d.jsx)("title",{children:"Parcoursup - Statistiques"}),Object(d.jsx)("meta",{name:"description",content:"Visualiseur des donn\xe9es publiques de Parcoursup"})]}),Object(d.jsx)(b,{}),Object(d.jsxs)("section",{className:"pcs-main-section",children:[Object(d.jsx)(I,{schoolsData:n,dataAttribution:""}),Object(d.jsx)(v,{})]})]})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,147)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),M()}},[[143,1,2]]]);
//# sourceMappingURL=main.d731f24c.chunk.js.map
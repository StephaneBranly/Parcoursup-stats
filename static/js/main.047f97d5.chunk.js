(this["webpackJsonpparcoursup-stats"]=this["webpackJsonpparcoursup-stats"]||[]).push([[0],{115:function(e,t,a){},117:function(e,t,a){},121:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var r=a(19),n=a.n(r),c=a(86),s=a.n(c),o=(a(115),a(47)),i=a.n(o),u=a(54),l=a(50),f=(a(117),a(87)),d=a.p+"static/media/logoParcoursup.3da2a0da.svg",p=(a(121),a(14)),j=function(){return Object(p.jsxs)("div",{className:"pcs-header",children:[Object(p.jsx)("img",{src:d,alt:"Logo Parcoursup"}),Object(p.jsx)("h1",{className:"pcs-main-title",children:"\ud83d\udcca Statistiques sur la plateforme"}),Object(p.jsx)("div",{children:"\ud83d\udea7Work in Progress...\ud83d\udea7"})]})},b=function(e){switch(e){case"informatique":return v(["\ud83d\udc69\u200d\ud83d\udcbb","\ud83e\uddd1\u200d\ud83d\udcbb","\ud83d\udc68\u200d\ud83d\udcbb","\ud83d\udc69\ud83c\udffb\u200d\ud83d\udcbb"," \ud83e\uddd1\ud83c\udffb\u200d\ud83d\udcbb","\ud83d\udc68\ud83c\udffb\u200d\ud83d\udcbb"]);default:return"\u26a0\ufe0f"}},h=Math.floor,m=Math.random,v=function(e){return e[h(m()*e.length)]},O=a(66),g=a.n(O),x="https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup",_=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=x+'&q=cod_aff_form%3D"'.concat(t,'"'),e.next=4,g.a.get(a);case 4:if(!(r=e.sent).data||1!==r.data.nhits){e.next=7;break}return e.abrupt("return",r.data.records[0].fields);case 7:return e.abrupt("return",{});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),w=(a(141),function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("23324");case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){c()}),[]);var s=function(e){return a[e]?a[e]:"NaN"};return Object(p.jsxs)("div",{className:"pcs-formationinfos-fragment",children:[Object(p.jsx)("div",{className:"pcs-formation-title",children:s("fil_lib_voe_acc")}),Object(p.jsxs)("div",{className:"pcs-formationinfos",children:[Object(p.jsx)("h1",{className:"pcs-schoolname",children:s("g_ea_lib_vx")}),Object(p.jsx)("h2",{children:"Formation ".concat(b("ingenieur"))})]})]})}),S=(a(142),a(91)),N=a(46),k=a(95),P=a(92),y=a(94),E=a(93),F=a(146),q=a(75),D=a(7),C=a(63),G=a(49),L=a(96),M=a(90),z=a.p+"static/media/marker.7a162fbb.svg",B=a(53),I=function(e){var t=Object(r.useState)(),a=Object(l.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(),o=Object(l.a)(s,2),i=o[0],u=o[1],f=Object(r.useRef)();return Object(r.useEffect)((function(){var e,t=new P.a({source:new y.a}),a=new S.a({target:null!==(e=f.current)&&void 0!==e?e:void 0,layers:[new k.a({maxZoom:19,source:new E.a({url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"})}),t],view:new N.a({projection:"EPSG:3857",center:[0,0],zoom:2}),controls:[]});c(a),u(t)}),[]),Object(r.useEffect)((function(){if(i&&0!==e.schoolsData.length){var t=e.schoolsData.map((function(e,t){var a=e.g_olocalisation_des_formations,r=new F.a({geometry:new q.a(Object(D.o)(a.reverse(),"EPSG:4326","EPSG:3857"))});return r.setStyle(new C.b({text:new M.a({text:e.\u00c9tablissement,offsetY:10,fill:new G.a({color:"#111"}),stroke:new B.a({color:"#FF3333",width:2})}),image:new L.a({src:z,color:"red",anchor:[.5,1],scale:.5})})),r})),a=i.getSource();a.clear(),a.addFeatures(t),n&&n.getView().fit(a.getExtent(),{padding:[100,100,100,100]})}}),[e.schoolsData]),Object(p.jsxs)("div",{className:"pcs-map-fragment",children:[Object(p.jsx)("div",{className:"pcs-map-title",children:"Carte des formations"}),Object(p.jsx)("div",{className:"pcs-map-container",children:Object(p.jsx)("div",{ref:f,className:"pcs-map"})})]})};var J=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=(t[0],t[1],Object(r.useState)([])),n=Object(l.a)(a,2),c=n[0],s=n[1],o=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x+"&q=&rows=10&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations",e.next=4,g.a.get("https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup&q=&rows=10&fields=cod_aff_form,g_ea_lib_vx,g_olocalisation_des_formations");case 4:(t=e.sent).data&&s(t.data.records.map((function(e){return e.fields}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(p.jsxs)("section",{children:[Object(p.jsxs)(f.a,{children:[Object(p.jsx)("title",{children:"Parcoursup - Statistiques"}),Object(p.jsx)("meta",{name:"description",content:"Visualiseur des donn\xe9es publiques de Parcoursup"})]}),Object(p.jsx)(j,{}),Object(p.jsxs)("section",{className:"pcs-main-section",children:[Object(p.jsx)(I,{schoolsData:c,dataAttribution:""}),Object(p.jsx)(w,{})]})]})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,147)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(J,{})}),document.getElementById("root")),T()}},[[143,1,2]]]);
//# sourceMappingURL=main.047f97d5.chunk.js.map